(function(n){function l(t){t=="1"?(n("#optionNumeric").show(),n("#optionMultipleChoice").hide()):n("#optionNumeric").hide();t=="2"?n("#multipleTextBox").show():n("#multipleTextBox").hide();t=="3"?(n("#optionMultipleChoice").show(),n("#multipleChoice").show()):(n("#optionMultipleChoice").hide(),n("#multipleChoice").hide());t=="4"?n("#dropDown").show():n("#dropDown").hide();t=="5"||t=="6"||t=="7"||t=="8"?(n("#fileUpload").show(),t=="5"?n("#docType").html("(ONLY MP4 TYPE VIDEO SUPPORTED)"):t=="6"?n("#docType").html("(ONLY MP3 TYPE AUDIO SUPPORTED)"):t=="7"?n("#docType").html("(ONLY JPG/JPEG/BMP/GIF/PNG TYPE IMAGE SUPPORTED)"):t=="8"?n("#docType").html("(ONLY MP4 TYPE FLASH SUPPORTED)"):n("#docType").html("(ONLY JPG/JPEG/BMP/GIF/PNG TYPE IMAGE SUPPORTED)")):n("#fileUpload").hide()}function s(){var t=0;n(".multiTextbox").each(function(){t++;n(this).find(".lblOption").html("Label "+t);n(this).find(".hdnMultipleText").attr("name","hdnMultipleText_"+t);n(this).find(".hdnMultipleText").attr("id","hdnMultipleText_"+t);n(this).find(".txtMultipleText").attr("name","txtMultipleText_"+t);n(this).find(".txtMultipleText").attr("id","txtMultipleText_"+t);n(this).find(".ddlMultipleDataType").attr("name","ddlMultipleDataType_"+t);n(this).find(".ddlMultipleDataType").attr("id","ddlMultipleDataType_"+t)})}function h(){var t=0;n(".multiChoice").each(function(){t++;n(this).find(".lblOption").html("Choice "+t);n(this).find(".hdnMultipleOption").attr("name","hdnMultipleOption_"+t);n(this).find(".hdnMultipleOption").attr("id","hdnMultipleOption_"+t);n(this).find(".txtMultipleOption").attr("name","txtMultipleOption_"+t);n(this).find(".txtMultipleOption").attr("id","txtMultipleOption_"+t)})}function c(){var t=0;n(".dropDown").each(function(){t++;n(this).find(".lblOption").html("Dropdown Choice "+t);n(this).find(".hdnDropdown").attr("name","hdnDropdown_"+t);n(this).find(".hdnDropdown").attr("id","hdnDropdown_"+t);n(this).find(".txtDropDownOption").attr("name","txtDropDownOption_"+t);n(this).find(".txtDropDownOption").attr("id","txtDropDownOption_"+t)})}function v(o,l){for(var a=1;a<=o.length;a++)l=="2"&&(a>1&&(i.append(t()),s()),n("#hdnMultipleText_"+a).val(o[a-1].cbtContentOptionId),n("#txtMultipleText_"+a).val(o[a-1].optionValue),n("#ddlMultipleDataType_"+a).val(o[a-1].dataType)),l=="3"&&(a>1&&(u.append(r()),h()),n("#hdnMultipleOption_"+a).val(o[a-1].cbtContentOptionId),n("#txtMultipleOption_"+a).val(o[a-1].optionValue)),l=="4"&&(a>1&&(e.append(f()),c()),n("#hdnDropdown_"+a).val(o[a-1].cbtContentOptionId),n("#txtDropDownOption_"+a).val(o[a-1].optionValue))}var o,t,i,r,u,f,e,a;n(function(){n("#Description").ckeditor()});o=n("#ContentTypeCombobox").val();l(o);n("#ContentTypeCombobox").change(function(){var t=n(this).val();t==""?n("#main").hide():(n("#main").show(),l(t))});t=function(){var t=0,i=n("#mtTemplate").text();return function(){return i.replace(/{{ID}}/g,++t)}}();i=n("#cloneMultiTextbox");n(document).on("click","a.addMT",function(){i.append(t());s();var r=n(".multiTextbox").length;n("#hdnDynamicRow").val(r)});i.append(t());n(document).on("click","a.deleteMT",function(){var t=n(".multiTextbox").length;t!=1&&n(this).parents(".multiTextbox").remove();s()});r=function(){var t=0,i=n("#mcTemplate").text();return function(){return i.replace(/{{ID}}/g,++t)}}();u=n("#cloneMultiChoice");n(document).on("click","a.addMC",function(){u.append(r());h();var t=n(".multiChoice").length;n("#hdnDynamicRow").val(t)});u.append(r());n(document).on("click","a.deleteMC",function(){var t=n(".multiChoice").length;t!=1&&n(this).parents(".multiChoice").remove();h()});f=function(){var t=0,i=n("#ddTemplate").text();return function(){return i.replace(/{{ID}}/g,++t)}}();e=n("#cloneDropdownbox");n(document).on("click","a.addDD",function(){e.append(f());c();var t=n(".dropDown").length;n("#hdnDynamicRow").val(t)});e.append(f());n(document).on("click","a.deleteDD",function(){var t=n(".dropDown").length;t!=1&&n(this).parents(".dropDown").remove();c()});a=cbtOptions;v(a,o);n("input[type=file]").change(function(){for(var i=new FormData,t=0;t<this.files.length;t++)i.append(this.files[t].name,this.files[t]);n.ajax({url:"/EClass/UploadDocument",type:"POST",contentType:!1,processData:!1,data:i,success:function(t){n("#hdnFilePath").val(t.result.filePath);n("#hdnFileName").val(t.result.fileName)},error:function(n){alert(n.statusText)}})});n(function(){var t=n("#CBTContentUpdateForm");t.find("input:first").focus();t.validate();t.find("button[type=submit]").click(function(i){var e;if(i.preventDefault(),t.valid()){var o=n("#CBTContentId").val(),s=n("#CategoryCombobox").val(),h=n("#CBTContentCombobox").val(),u=n("#ContentTypeCombobox").val(),c=n("#Required").prop("checked"),l=n("#OnlyNumericValue").prop("checked"),a=n("#IncludeComment").prop("checked"),v=n("#AllowMultipleChoice").prop("checked"),y=n("#Description").val(),p=n("#Code").val(),w=n("#hdnFilePath").val(),b=n("#hdnFileName").val(),r=0,f=[];u==2?n(".multiTextbox").each(function(){r++;var t=n(this).find(".hdnMultipleText").attr("id","hdnMultipleText_"+r).val(),i=n(this).find(".txtMultipleText").attr("id","txtMultipleText_"+r).val(),u=n(this).find(".ddlMultipleDataType").attr("id","ddlMultipleDataType_"+r).val();f.push(t,i,u)}):u==3?n(".multiChoice").each(function(){r++;var t=n(this).find(".hdnMultipleOption").attr("id","hdnMultipleOption_"+r).val(),i=n(this).find(".txtMultipleOption").attr("id","txtMultipleOption_"+r).val();f.push(t,i,"VARCHAR")}):u==4?n(".dropDown").each(function(){r++;var t=n(this).find(".hdnDropdown").attr("id","hdnDropdown_"+r).val(),i=n(this).find(".txtDropDownOption").attr("id","txtDropDownOption_"+r).val();f.push(t,i,"VARCHAR")}):u==5||u==6||u==7||u==8;e={CBTContentId:o,PrecedingCBTContentId:h,Code:p,Description:y,Required:c,OnlyNumericValue:l,IncludeComment:a,AllowMultipleChoice:v,CategoryId:s,ContentTypeId:u,CBTContentOption:f,FileName:b,Location:w};abp.services.app.eClass.updateCBTContent(e).done(function(){location.href="/EClass/CBTContentList"})}})})})(jQuery);