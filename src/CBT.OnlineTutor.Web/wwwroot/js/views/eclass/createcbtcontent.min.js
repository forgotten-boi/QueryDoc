(function(n){function o(){var t=0;n(".multiTextbox").each(function(){t++;n(this).find(".lblOption").html("Label "+t);n(this).find(".txtMultipleText").attr("name","txtMultipleText_"+t);n(this).find(".txtMultipleText").attr("id","txtMultipleText_"+t);n(this).find(".ddlMultipleDataType").attr("name","ddlMultipleDataType_"+t);n(this).find(".ddlMultipleDataType").attr("id","ddlMultipleDataType_"+t)})}function s(){var t=0;n(".multiChoice").each(function(){t++;n(this).find(".lblOption").html("Choice "+t);n(this).find(".txtMultipleOption").attr("name","txtMultipleOption_"+t);n(this).find(".txtMultipleOption").attr("id","txtMultipleOption_"+t)})}function h(){var t=0;n(".dropDown").each(function(){t++;n(this).find(".lblOption").html("Dropdown Choice "+t);n(this).find(".txtDropDownOption").attr("name","txtDropDownOption_"+t);n(this).find(".txtDropDownOption").attr("id","txtDropDownOption_"+t)})}var t,i,r,u,f,e;n(function(){n("#Description").ckeditor()});n("#main").hide();n("#CategoryCombobox").change(function(){n.getJSON("/EClass/GetCBTContentByCategoryId",{CategoryID:n("#CategoryCombobox").val()},function(t){var r="",i;for(n("#PrecedingCBTContentId").empty(),i=0;i<t.result.length;i++)r+="<option value='"+t.result[i].value+"'>"+t.result[i].text+"<\/option>";n("#PrecedingCBTContentId").html(r)})});n("#ContentTypeCombobox").change(function(){var t=n(this).val();t==""?n("#main").hide():(n("#main").show(),t=="1"?(n("#optionNumeric").show(),n("#optionMultipleChoice").hide()):n("#optionNumeric").hide(),t=="2"?n("#multipleTextBox").show():n("#multipleTextBox").hide(),t=="3"?(n("#optionMultipleChoice").show(),n("#multipleChoice").show()):(n("#optionMultipleChoice").hide(),n("#multipleChoice").hide()),t=="4"?n("#dropDown").show():n("#dropDown").hide(),t=="5"||t=="6"||t=="7"||t=="8"?(n("#fileUpload").show(),t=="5"?n("#docType").html("(ONLY MP4 TYPE VIDEO SUPPORTED)"):t=="6"?n("#docType").html("(ONLY MP3 TYPE AUDIO SUPPORTED)"):t=="7"?n("#docType").html("(ONLY JPG/JPEG/BMP/GIF/PNG TYPE IMAGE SUPPORTED)"):t=="8"?n("#docType").html("(ONLY MP4 TYPE FLASH SUPPORTED)"):n("#docType").html("(ONLY JPG/JPEG/BMP/GIF/PNG TYPE IMAGE SUPPORTED)")):n("#fileUpload").hide())});t=function(){var t=0,i=n("#mtTemplate").text();return function(){return i.replace(/{{ID}}/g,++t)}}();i=n("#cloneMultiTextbox");n(document).on("click","a.addMT",function(){i.append(t());o();var r=n(".multiTextbox").length;n("#hdnDynamicRow").val(r)});i.append(t());n(document).on("click","a.deleteMT",function(){var t=n(".multiTextbox").length;t!=1&&n(this).parents(".multiTextbox").remove();o()});r=function(){var t=0,i=n("#mcTemplate").text();return function(){return i.replace(/{{ID}}/g,++t)}}();u=n("#cloneMultiChoice");n(document).on("click","a.addMC",function(){u.append(r());s();var t=n(".multiChoice").length;n("#hdnDynamicRow").val(t)});u.append(r());n(document).on("click","a.deleteMC",function(){var t=n(".multiChoice").length;t!=1&&n(this).parents(".multiChoice").remove();s()});f=function(){var t=0,i=n("#ddTemplate").text();return function(){return i.replace(/{{ID}}/g,++t)}}();e=n("#cloneDropdownbox");n(document).on("click","a.addDD",function(){e.append(f());h();var t=n(".dropDown").length;n("#hdnDynamicRow").val(t)});e.append(f());n(document).on("click","a.deleteDD",function(){var t=n(".dropDown").length;t!=1&&n(this).parents(".dropDown").remove();h()});n("input[type=file]").change(function(){for(var i=new FormData,t=0;t<this.files.length;t++)i.append(this.files[t].name,this.files[t]);n.ajax({url:"/EClass/UploadDocument",type:"POST",contentType:!1,processData:!1,data:i,success:function(t){n("#hdnFilePath").val(t.result.filePath);n("#hdnFileName").val(t.result.fileName)},error:function(n){alert(n.statusText)}})});n(function(){var t=n("#CBTContentCreationForm");t.find("input:first").focus();t.validate();t.find("button[type=submit]").click(function(i){var e;if(i.preventDefault(),t.valid()){var o=n("#CategoryCombobox").val(),s=n("#PrecedingCBTContentId").val(),r=n("#ContentTypeCombobox").val(),h=n("#Required").prop("checked"),c=n("#OnlyNumericValue").prop("checked"),l=n("#IncludeComment").prop("checked"),a=n("#AllowMultipleChoice").prop("checked"),v=n("#Description").val(),y=n("#Code").val(),p=n("#hdnFilePath").val(),w=n("#hdnFileName").val(),u=0,f=[];r==2?n(".multiTextbox").each(function(){u++;var t=n(this).find(".txtMultipleText").attr("id","txtMultipleText_"+u).val(),i=n(this).find(".ddlMultipleDataType").attr("id","ddlMultipleDataType_"+u).val();f.push(t,i)}):r==3?n(".multiChoice").each(function(){u++;var t=n(this).find(".txtMultipleOption").attr("id","txtMultipleOption_"+u).val();f.push(t,"VARCHAR")}):r==4?n(".dropDown").each(function(){u++;var t=n(this).find(".txtDropDownOption").attr("id","txtDropDownOption_"+u).val();f.push(t,"VARCHAR")}):r==5||r==6||r==7||r==8;e={PrecedingCBTContentId:s,Code:y,Description:v,Required:h,OnlyNumericValue:c,IncludeComment:l,AllowMultipleChoice:a,CategoryId:o,ContentTypeId:r,CBTContentOption:f,FileName:w,Location:p};abp.services.app.eClass.createCBTContent(JSON.stringify(e)).done(function(){location.href="/EClass/CBTContentList"})}})})})(jQuery);